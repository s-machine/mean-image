
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Mean Images</title>
<link rel="stylesheet" href="css/style.css">
<link rel="stylesheet" href="css/drag-drop.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script src="js/jquery.mousewheel.min.js"></script>
<script src="js/jquery.easing.js"></script>
<script src="js/jquery.singular.js"></script>
<script src="js/isotope.pkgd.min.js"></script>
<script src="js/packery-mode.pkgd.min.js"></script>
<script src="js/hexcodeToValue.js" type="text/javascript"></script>
<script type="text/javascript" src="js/d3.v4.js"></script>
<script>
$(function() {
    $('.js-singular').singular({
        section: '.mod-singular-section',
        nav: '.js-singular-nav',
        prev: '.js-singular-prev',
        next: '.js-singular-next',
        navActiveClass: 'js-singular-active',
        scrollSpeed: 1000,
        mousewheel: true,
        easing: 'easeInOutQuart',
        scrollEnd: function(elem) {
        }
    });
});
</script>
</head>

<body>
<div class="mod-page">
<div class="mod-singular js-singular">

    <!--page_1 Intro-->
    <div id="sec01" class="mod-singular-section">
        <div class="mod-singular-section-in">
            <div class="transbox">
                <h1 class="mod-singular-ttl">Mean Images</h1>
                <h2 class="mod-singular-subttl">an exploration of culture through pixels</h2>
                <p id="authors" class="mod-singular-txt"><a href="/">Xingxin Chen</a>, <a href="http://sienaduplan.com">Siena Duplan</a>, <a href="https://godsamit.github.io/Samson-Liu-Website/">Samson Liu</a></p>
            </div>
            <!--next_page_button-->
            <p class="mod-singular-pager"><a href="" class="mod-singular-next js-singular-next"></a></p>
            <!--next_page_button-->
            <div id="salavon">
                <p class="circled"><a href="http://salavon.com/work/EveryPlayboyCenterfoldDecades/" target="_blank">?</a></p>
            </div>
        </div>
    </div>

    <!--page_2 Salavon-->
    <section id="sec02" class="mod-singular-section">
        <div class="mod-singular-section-in">
            <h2 class="mod-singular-hdng">What is a "mean" image?</h2>
            <p class="mod-singular-txt-2">
                Images like the ones below are the result of mathematically <em>averaging</em> several photographs. Digital averaging of pixels is a simple process where each pixel is treated as a numeric point with an RGB value. 
            </p>
            <p class="mod-singular-txt-2">
                This project is inspired by the artwork of contemporary artist <a href="http://www.salavon.com" target="_blank">Jason Salavon</a> whose series <a href="http://salavon.com/work/SpecialMoments/" target ="_blank">"100 Special Moments”</a> is shown below. Salavon is known for using computer software to reconfigure existing media into fine art. His series on averaged images straddles the boundary between art and data visualization, often revealing never-before-seen patterns in the pixels captured in photographs.
            </p>
            <div class="salavon-grid">
                <a href="http://salavon.com/work/SpecialMoments/" target="_blank">
                    <img src="images/salavon/100moments-1.jpg" height="200" class="salavon-photo" id="S-1"></a>
                <a href="http://salavon.com/work/SpecialMoments/" target="_blank">
                    <img src="images/salavon/100moments-2.jpg" height="200" class="salavon-photo" id="S-2"></a>
                <a href="http://salavon.com/work/SpecialMoments/" target="_blank">
                    <img src="images/salavon/100moments-3.jpg" height="200" class="salavon-photo" id="S-3"></a>
                <a href="http://salavon.com/work/SpecialMoments/" target="_blank">
                    <img src="images/salavon/100moments-4.jpg" height="200" class="salavon-photo" id="S-4"></a>
            </div>
            <!--next_page_button-->
            <p class="mod-singular-pager"><a href="" class="mod-singular-next js-singular-next"></a></p>
            <!--next_page_button-->
        </div>
        <!--javascript-image-layout-->
        <script>
            var $grid = $('.salavon-grid').isotope({
                // main isotope options
                itemSelector: '.salavon-photo',
                // set layoutMode
                layoutMode: 'fitRows',
                // options for cellsByRow layout mode
                fitRows: {
                    gutter: 5,
                    rowHeight: 150
                },
                // options for masonry layout mode
            })
        </script>
        <!--javascript-d3-graphics-->
        <script>

            function getSum(total, num){
                return total + num;
            }
            $('.salavon-photo').mouseover(function(){
                var id = Number($(this).attr("id")[2]); 
                //not making it responsive... magic numbers
                widthArray = [151,159,131,250]
                var img_width = widthArray[id-1];
                if (id == 1) startX = 0;
                else{
                    var startX = widthArray.slice(0,id-1).reduce(getSum) + 5*(id-1);
                }

                var barChart = d3.select(".salavon-grid")
                .append("svg")
                .attr("class","salavon-bar")
                .attr("width", 1000)
                .attr("height", 75);

                d3.json("data/salavon.json", function(error,data){
                    if (error) throw error;
                    let listLength = data[id-1].colorList.length;
                    barChart.selectAll("rect")
                        .data(data[id-1].colorList)
                        .enter()
                        .append("rect")
                        .attr("height","0")
                        .attr("width",function(d,i){return img_width/listLength})
                        .attr("x",function(d,i){return startX+i*(img_width/listLength)})
                        .attr("y","0")
                        .attr("fill", function(d,i){return d})
                        .transition("1000")
                        .attr("height",function(d,i){return hexToValue(d)*75});
                    $("svg").translate
                })
            }).mouseout(function(){
                d3.select("#sec02").selectAll("rect")
                    .transition("1000")
                    .attr("height","0")
                    .remove();


            });

        </script>
    </section>

    <!--page_3 Faces-->
    <section id="sec03" class="mod-singular-section">
        <div class="mod-singular-section-in">
            <h2 class="mod-singular-hdng">An "average" face?</h2>
            <div class="container">
                <img src="images/cropped_yale.gif" width="700">
                <p class="mod-singular-txt-3 bottom-right">
                    The <a href="http://academictorrents.com/details/aad8bf8e6ee5d8a3bf46c7ab5adfacdd8ad36247" target="_blank">Cropped Yale Dataset</a> is a widely-used dataset for machine learning and image processing research. The dataset contains 16128 images of 28 human subjects in 9 poses and 64 illumination conditions. It’s popularity is due in part to its high-quality alignment of facial features which allows the "mean" image of thousands of images to resemble a single face. <br> Interestingly, the more images that are used to compute the average face, the slower the rate of change in the mean image. That is, the average image tends to <em>converge fairly quickly</em> (between 20 and 50 images). See for yourself below! 
                </p>
            </div>
            <!--next_page_button-->
            <p class="mod-singular-pager"><a href="" class="mod-singular-next js-singular-next"></a></p>
            <!--next_page_button-->
        </div>
    </section>

    <!--page_4 Convergence-->
    <section id="sec04" class="mod-singular-section">
        <div class="mod-singular-section-in">
            <h2 class="mod-singular-hdng">Can you find the point of convergence?</h2>
            <div class="grid-container">
                <!--slider image-->
                <div class="grid-item">
                    <img id="faces" width="300">
                </div>
                <!--final image-->
                <div class="grid-item">
                    <img src="images/mean_faces/mean_faces_2414.png" width="300">
                </div>
                <div class="gird-item">
                    <p class="grid-item converge-txt">The mean face composed of 100 images already begins to look similar to the average of all 2,414 faces. This means that if we took the "average" of every human's face on Earth, we wouldn't expect the face to look much different from the image right. </p>
                </div>
                <!--slider+caption-->
                <div class="grid-item">
                    <input class="slider-width2" id="valR" type="range" min="0" max="5" value="0" step="1" oninput="showVal(this.value)" onchange="showVal(this.value)" />
                    <span id="range">0</span>
                    <div class="grid-item face-number">
                        <span id="realval">10</span>
                        <span>faces</span>
                    </div>
                </div>  
                <div class="grid-item face-number fn2">
                    2414 faces
                </div>

            </div>
            <script>
                var val = $("#valR").val();
                $("#range").html=val;
                var numImages = 10;
                $("#faces").attr("src", "images/mean_faces/mean_faces_" + numImages + ".png");
                function showVal(newVal){
                    if (newVal >= 2){ 
                        $(".converge-txt").animate({opacity: '1'},"slow");
                    }
                    numImagesArr=["10", "50", "100", "500", "1000", "2414"]
                    numImages=numImagesArr[newVal];
                    $("#range").html(newVal);
                    $("#realval").html(numImagesArr[newVal]);
                    $("#faces").attr("src", "images/mean_faces/mean_faces_" + numImages + ".png");
                }

            </script>
            <!--next_page_button-->
            <p class="mod-singular-pager"><a href="" class="mod-singular-next js-singular-next"></a></p>
            <!--next_page_button-->
        </div>
    </section>

    <!--page_5 History-->
    <section id="sec05" class="mod-singular-section">
        <div class="mod-singular-section-in">
            <h2 class="mod-singular-hdng">Going back in <i>Time</i> with mean images</h2>
            <div class="time-container">
                <!--slider image-->
                <div class="time-div">
                    <img id="time-magazine" height="400">
                    <p id="time-cap">1923</p>
                    <!--slider+caption-->
                    <input list = "steplist" step="1" class="slider-width time-slider" id="year" type="range" min="1923" max="2018" value="0" oninput="changeAll(this.value)" />
                    <datalist id="steplist">
                        <option>1924</option>
                        <option>1927</option>
                        <option>1928</option>
                        <option>1966</option>
                        <option>1974</option>
                        <option>1993</option>
                        <option>2017</option>
                        <option>2018</option>
                    </datalist>
                    <div id="slider-range-max"></div>
                    <span class="speech-bubble"></span>
                    <p class="time-intro">The mean image on the right is generated from the all the <a href="http://time.com/" target ="_blank"><i>Time</i></a> Magazines in a year, since its inception until 2018. See if you can identify any historical events/figures from the mean images. Can you tell the gender of the prominent figures featured on covers throughout the years? Why might some years be darker/lighter than other years?</p>
                    <br>
                    <p class="feature-txt"></p>
                    <p class="feature-img"></p>
                </div>  
            </div>

            <!--change_cover+D3_bar_chart-->
            <script>      
                //change_cover
                var year = $("#year").val();
                var timeCover = "images/time/Time-" + year + ".jpg" ;
                $("#time-magazine").attr("src", timeCover);

                //D3_bar_chart
                var barChart = d3.select(".time-container")
                .insert("svg",":first-child")
                .attr("class","stacked-bar")
                .attr("width", 100)
                .attr("height", 500)

                //load bar-chart
                d3.json("data/time.json",function(error, data){
                    if (error) throw error;
                    barChart.selectAll("rect")
                        .remove();

                    barChart.selectAll("rect")
                        .data(data[0].colorList)
                        .enter()
                        .append("rect")
                        .attr("height","1.07")
                        .attr("width", function(d,i){return hexToValue(d)*100})
                        .attr("x",function(d,i){ return 100 - hexToValue(d)*100})
                        .attr("y",function(d,i){ return i*1.07})
                        .attr("fill", function(d,i){return d});
                });

                function changeTimeCover(year){
                    var timeCover = "images/time/Time-" + year + ".jpg" ;
                    $("#time-magazine").attr("src", timeCover);
                    $("#time-cap").html(year);
                }

                function changeBar(year){
                    var index = year - 1923;

                    d3.json("data/time.json",function(error, data){
                        if (error) throw error;
                        barChart.selectAll("rect")
                            .remove();

                        barChart.selectAll("rect")
                            .data(data[index].colorList)
                            .enter()
                            .append("rect")
                            .attr("height","1.07")
                            .attr("y",function(d,i){ return i*1.07})
                            .attr("fill", function(d,i){return d})
                            .attr("x","100")
                            .attr("width","0")
                            .transition("1000")
                            .attr("x","45")
                            .attr("width", function(d,i){return hexToValue(d)*100})
                            .attr("x",function(d,i){return 100 - hexToValue(d)*100});
                    });
                }

                function changeAll(year){
                    changeTimeCover(year);
                    changeBar(year);
                    if(year==1966){
                        $(".feature-txt").animate({opacity: '1'},"fast")
                            .html("I spy a suit and tie in the bottom half of the image. This year featured a record-breaking lowest number of women on the cover: 3.");
//                                    $(".feature-img img").remove();
                        $(".feature-img").animate({opacity: '1'},"fast")
                        .prepend('<img id="men" src="./images/men.png" style="width:450px" />');
                        $(".feature-img2 img").remove();

                    }
                    else if(year==1993){
                        $(".feature-txt").animate({opacity: '1'},"fast")
                            .html("1993 covers featured text-heavy covers with bold black, white, and yellow titles spread across the covers.");
//                                    $(".feature-img img").remove();
                        $(".feature-img").animate({opacity: '1'},"fast")
                        .prepend('<img id="1993" src="./images/time_1993.png" style="width:350px" />');
//                                    $(".feature-img img").remove();

                    }
                    else if(year==1924) {
                        $(".feature-txt").animate({opacity: '1'},"fast")
                            .html("At its inception, the magazine didn't have its now-famous signature red border.");
                        $(".feature-img img").remove();
                        $(".feature-img2 img").remove();
                    }
                    else if(year==1927) {
                        $(".feature-txt").animate({opacity: '1'},"fast")
                            .html("Four years after the first magazine, the red border is added.");
                        $(".feature-img img").remove();
                        $(".feature-img2 img").remove();

                    }
                    else if(year==2017){
                        $(".feature-txt").animate({opacity: '1'},"fast")
                            .html("The year of...");
                                    $(".feature-img img").remove();
                        $(".feature-img").animate({opacity: '1'},"fast")
                        .prepend('<img id="trump17" src="./images/trmp_2017.png" style="height:200px" style="width:350px" />');
//                                    $(".feature-img img").remove();

                    }
                    else if(year==2018){
                        $(".feature-txt").animate({opacity: '1'},"fast")
                            .html("Welcome to today. Can you spot this cover? ;)");
                                    $(".feature-img img").remove();
                        $(".feature-img").animate({opacity: '1'},"fast")
                        .prepend('<img id="tr*mp" src="./images/trump.jpg" style="width:200px" style="width:250px" />');
//                                    $(".feature-img img").remove();

                    }
                    else if(year >= 1928 && year <= 1952) {
                        $(".feature-txt").animate({opacity: '1'},"fast")
                            .html("During these years (1928 – 1952), a consistent theme appears: red border and a lot of white space around a headshot (usually of a man).");
                        $(".feature-img img").remove();
                        $(".feature-img2 img").remove();
                    }
                    else if(year >= 1974 && year <= 1976) {
                        $(".feature-txt").animate({opacity: '1'},"fast")
                            .html("Watch closely what happens between 1974 and 1976. There appears to be a shift in the prominence of a recognizable face in the data. In the modern history of Time magazine, fewer faces are featured and covers become less about individual people.");
                        $(".feature-img img").remove();
                        $(".feature-img2 img").remove();
                    }
                    else {
                        $(".feature-txt").animate({opacity: '0'},"fast");
                        $(".feature-img img").remove();
                        $(".feature-img2 img").remove();
                    }
                }
            </script>

            <!--next_page_button-->
            <p class="mod-singular-pager"><a href="" class="mod-singular-next js-singular-next"></a></p>
            <!--next_page_button-->
        </div>
    </section>

    <!--page_6 Comparison-->
    <section id="sec06" class="mod-singular-section">
        <div class="mod-singular-section-in">
            <h2 class="mod-singular-hdng">Social norms and culture, through mean image </h2>

            <span id="filters" class="button-group">
                <button class="button" data-filter="*">Explore All</button>
                <button class="button" data-filter=".mvw">Men vs Women</button>
                <button class="button" data-filter=".countries">Magazines in different countries</button>
            </span>
            <div class="magazine-grid-container-5 comparison-container">            
                <!--draggable covers a-->
                <div class="magazine-grid-item-5">

                    <div class="magazine-grid-container-a magazines">
                        <div class="magazine-grid-item  mvw">
                            <div id="draggable-a" class="ui-widget-content menshealth"></div>
                        </div>

                        <div class="magazine-grid-item countries">
                            <div id="draggable-a" class="ui-widget-content usa"></div>
                        </div>

                        <div class="magazine-grid-item countries">
                            <div id="draggable-a" class="ui-widget-content japan"></div>
                        </div>

                        <div class="magazine-grid-item  countries">
                            <div id="draggable-a" class="ui-widget-content italia"></div>
                        </div>
                    </div>
                </div>

                <!--drop off area-->
                <div class="magazine-grid-item-5">
                    <div id="droppable-a" class="ui-widget-header" style="display: inline-block">
                        <p>Drag a magazine here</p>
                    </div>
                </div>
                <div class="magazine-grid-item-5">
                    <div id="droppable-b" class="ui-widget-header" style="display: inline-block;">
                        <p>Drag a magazine here</p>
                    </div>
                </div>

                <!--draggable covers b-->
                <div class="magazine-grid-item-5">
                    <div class="magazine-grid-container-b magazines">

                        <div class="magazine-grid-item mvw">
                            <div id="draggable-b" class="ui-widget-content womenshealth"></div>
                        </div>

                        <div class="magazine-grid-item mvw">
                            <div id="draggable-b" class="ui-widget-content placeholder"></div>
                        </div>

                        <div class="magazine-grid-item mvw">
                            <div id="draggable-b" class="ui-widget-content placeholder"></div>
                        </div>  

                        <div class="magazine-grid-item countries">
                            <div id="draggable-b" class="ui-widget-content placeholder"></div>
                        </div>  
                    </div>
                </div>
            </div> 
            <!--filter-->
            <script>
                // init Isotope
                var $gallery = $('.magazines').isotope({
                    itemSelector: '.magazine-grid-item',
                    llayoutMode: 'cellsByRow',
                    cellsByRow: {
                        columnWidth: 1100,
                        rowHeight: 110
                    }
                });

                // bind filter button click
                $('.button-group').on( 'click', 'button', function() {
                    var filterValue = $( this ).attr('data-filter');
                    $gallery.isotope({ filter: filterValue });
                });

                // change is-checked class on buttons
                $('.buttons').each( function( i, buttonGroup ) {
                    var $buttonGroup = $( buttonGroup );
                    $buttonGroup.on( 'click', 'button', function() {
                        $buttonGroup.find('.is-checked').removeClass('is-checked');
                        $( this ).addClass('is-checked');
                    });
                });
            </script>
            <!--drag and drop-->
            <script>
                $( function() {
                    $("#draggable-a, #draggable-b, #draggable-nonvalid-a, #draggable-nonvalid-b").draggable({ revert: "valid" });

                    $( "#droppable-a" ).droppable({
                        accept: "#draggable-a",
                        classes: {
                            "ui-droppable-active": "ui-state-active-a",
                            "ui-droppable-hover": "ui-state-hover-a"
                        },
                        drop: function(event,ui) {
                            $(this).addClass("ui-state-highlight-a")
                                .find("p")
                                .html("");
                        }
                    });

                    $( "#droppable-b" ).droppable({
                        accept: "#draggable-b",
                        classes: {
                            "ui-droppable-active": "ui-state-active-b",
                            "ui-droppable-hover": "ui-state-hover-b"
                        },
                        drop: function(event,ui){
                            $(this).addClass("ui-state-highlight-b")
                                .find("p")
                                .html("")}
                    });
                } );
            </script>
            <!--next_page_button-->
            <p class="mod-singular-pager"><a href="" class="mod-singular-next js-singular-next"></a></p>
            <!--next_page_button-->
        </div>
    </section>

    <!--page_7 Exploratory-->  
    <section id="sec07" class="mod-singular-section">
      <div class="mod-singular-section-in">
        <h2 class="mod-singular-hdng">Explore more mean images</h2>
          <h3>Hover over the images below to discover topic.</h3>
          <div class="exploratory">
            <a href="http://www.laurainthekitchen.com/recipe-category.php?category=BEVERAGE" class="ex-container  Beverage.jpg" target="_blank">
                <img src="images/exploratory/Beverage.jpg" height="200" class="exploratory-photo food">
                <h2 class="img-name">Beverages</h2>
            </a>
            <a href="https://www.instagram.com/icecream/" class="ex-container Ice-Cream.jpg" target="_blank">
                <img src="images/exploratory/Ice-Cream.jpg" height="200" class="exploratory-photo youtube">
                <h2 class="img-name">Ice Cream</h2>
            </a>
            <a href="https://www.youtube.com/user/TheFineBros" class="ex-container React.jpg" target="_blank">
                <img src="images/exploratory/React.jpg" height="200" class="exploratory-photo youtube">
                <h2 class="img-name">React Videos</h2>
            </a>
            <a href="https://www.youtube.com/results?search_query=73+questions vogue-73-questions.jpg" class="ex-container vogue-73-questions.jpg" target="_blank">
                <img src="images/exploratory/vogue-73-questions.jpg" height="200" class="exploratory-photo youtube">
                <h2 class="img-name">73 Questions</h2>
            </a>
            <a href="https://www.zillow.com/homes/los-angelos_rb/" class="ex-container Average-LA.jpg" target="_blank">
                <img src="images/exploratory/Average-LA.jpg" height="200" class="exploratory-photo youtube">
                <h2 class="img-name">Zillow - Los Angeles</h2>
            </a>
            <a href="https://www.zillow.com/homes/seattle_rb/" class="ex-container Average-Seattle.jpg" target="_blank">
                <img src="images/exploratory/Average-Seattle.jpg" height="200" class="exploratory-photo youtube">
                <h2 class="img-name">Zillow - Seattle</h2>
            </a>
            <a href="https://www.instagram.com/explore/tags/tajmahal/" class="ex-container Taj-Mahal.jpg" target="_blank">
                <img src="images/exploratory/Taj-Mahal.jpg" height="200" class="exploratory-photo youtube">
                <h2 class="img-name">Taj Mahal</h2>
            </a>
            <a href="https://www.instagram.com/explore/tags/pisa/" class="ex-container Pisa.jpg" target="_blank">
                <img src="images/exploratory/Pisa.jpg" height="200" class="exploratory-photo youtube">
                <h2 class="img-name">Leaning Tower of Pisa</h2>
            </a> 
          </div>

            <!--next_page_button-->
            <p class="mod-singular-pager"><a href="" class="mod-singular-prev js-singular-prev"></a></p>
            <!--next_page_button-->
        <script>
            var $grid = $('.exploratory').isotope({
                // main isotope options
                itemSelector: '.ex-container',
                // set layoutMode
                layoutMode: 'packery',
                packery: {
                    gutter:10
                }
            })

            $(".ex-container").mouseover(function(){
                $(this).find(".img-name").animate({opacity: 1},'fast');
            }).mouseleave(function(){
                $(this).find(".img-name").animate({opacity: 0},'fast');
            });
        </script>
       <!--javascript d3 graphics-->

        <script>            
          function drawChart(filename, height){
            var barChart = d3.select("a[class$='"+filename+"']")
                            .append("svg")
                            .attr("class","ex-bar")
                            .attr("width", 25)
                            .attr("height", height);
            
            d3.json("data/exploratory.json", function(error,data){
              if (error) throw error;
              var listLength = data[filename].length;
              barChart.selectAll("rect")
                      .data(data[filename])
                      .enter()
                      .append("rect")
                      .attr("height",function(d,i){return height/listLength})
                      .attr("width","25")
                      .attr("y",function(d,i){return i*height/listLength})
                      .attr("fill", function(d,i){return d})
                      .attr("x","25")
                      .transition("1000")
                      .attr("x","0")
                });
          }

            $(".ex-container").mouseover(function(){
              var filename = $(this).find("img").attr("src").slice(19);
              drawChart(filename, this.clientHeight);
            }).mouseout(function(){
              $(this).find(".ex-bar")
                    .css("z-index","-1")
                    .animate({left:0},'fast', function(){
                      $(this).remove()
              }); 
            });
            </script>
      </div>
    </section>

</div>
<div class="mod-nav">
    <ul class="mod-nav-list js-singular-nav">
        <li class="mod-nav-item"><a href="#sec01">1</a></li>
        <li class="mod-nav-item"><a href="#sec02">2</a></li>
        <li class="mod-nav-item"><a href="#sec03">3</a></li>
        <li class="mod-nav-item"><a href="#sec04">4</a></li>
        <li class="mod-nav-item"><a href="#sec05">5</a></li>
        <li class="mod-nav-item"><a href="#sec06">6</a></li>
        <li class="mod-nav-item"><a href="#sec07">7</a></li>
    </ul>

</div>

</div>
</body>
</html>
