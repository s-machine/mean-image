
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Mean Images</title>
<link rel="stylesheet" href="css/style.css">
<link rel="stylesheet" href="css/drag-drop.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script src="js/jquery.mousewheel.min.js"></script>
<script src="js/jquery.easing.js"></script>
<script src="js/jquery.singular.js"></script>
<script src="js/isotope.pkgd.min.js"></script>
<script type="text/javascript" src="js/d3.v4.js"></script>
<script>
  $(function() {
    $('.js-singular').singular({
      section: '.mod-singular-section',
      nav: '.js-singular-nav',
      prev: '.js-singular-prev',
      next: '.js-singular-next',
      navActiveClass: 'js-singular-active',
      scrollSpeed: 1000,
      mousewheel: true,
      easing: 'easeInOutQuart',
      scrollEnd: function(elem) {
      }
    });
  });
</script>
</head>

<body>
  <div class="mod-page">
    <div class="mod-singular js-singular">
      
<!--page_1 Intro-->
      <div id="sec01" class="mod-singular-section">
        <div class="mod-singular-section-in">
          <div class="transbox">
            <h1 class="mod-singular-ttl">Mean Images</h1>
            <h2 class="mod-singular-subttl">an exploration of culture through pixels</h2>
            <p id="authors" class="mod-singular-txt"><a href="/">Xingxin Chen</a>, <a href="https://sienaduplan.com">Siena Duplan</a>, <a href="https://godsamit.github.io/Samson-Liu-Website/">Samson Liu</a></p>
          </div>
          <!--next_page_button-->
          <p class="mod-singular-pager"><a href="" class="mod-singular-next js-singular-next"></a></p>
          <!--next_page_button-->
          <div id="salavon">
            <p class="circled"><a href="http://salavon.com/work/EveryPlayboyCenterfoldDecades/" target="_blank">?</a></p>
          </div>
        </div>
      </div>
      
<!--page_2 Salavon-->
      <section id="sec02" class="mod-singular-section">
        <div class="mod-singular-section-in">
          <h2 class="mod-singular-hdng">What is a "mean" image?</h2>
          <p class="mod-singular-txt-2">
            Images like the ones below are the result of mathematically <em>averaging</em> several photographs. Digital averaging of pixels is a simple process where each pixel is treated as a numeric point with an RGB value. 
          </p>
          <p class="mod-singular-txt-2">
            This project is inspired by the artwork of contemporary artist <a href="http://www.salavon.com" target="_blank">Jason Salavon</a> whose series <a href="http://salavon.com/work/SpecialMoments/" target ="_blank">"100 Special Moments”</a> is shown below. Salavon is known for using computer software to reconfigure existing media into fine art. His series on averaged images straddles the boundary between art and data visualization, often revealing never-before-seen patterns in the pixels captured in photographs.
          </p>
          <div class="salavon-grid">
          <a href="http://salavon.com/work/SpecialMoments/" target="_blank">
            <img src="images/salavon/100moments-1.jpg" height="200" class="salavon-photo" id="S-1"></a>
          <a href="http://salavon.com/work/SpecialMoments/" target="_blank">
            <img src="images/salavon/100moments-2.jpg" height="200" class="salavon-photo" id="S-2"></a>
          <a href="http://salavon.com/work/SpecialMoments/" target="_blank">
            <img src="images/salavon/100moments-3.jpg" height="200" class="salavon-photo" id="S-3"></a>
          <a href="http://salavon.com/work/SpecialMoments/" target="_blank">
            <img src="images/salavon/100moments-4.jpg" height="200" class="salavon-photo" id="S-4"></a>
          </div>
          <!--next_page_button-->
          <p class="mod-singular-pager"><a href="" class="mod-singular-next js-singular-next"></a></p>
          <!--next_page_button-->
        </div>
        <!--javascript-image-layout-->
        <script>
        var $grid = $('.salavon-grid').isotope({
          // main isotope options
          itemSelector: '.salavon-photo',
          // set layoutMode
          layoutMode: 'fitRows',
          // options for cellsByRow layout mode
          fitRows: {
            gutter: 5,
            rowHeight: 150
          },
          // options for masonry layout mode
        })
        </script>
        <!--javascript-d3-graphics-->
        <script>
          
          function getSum(total, num){
            return total + num;
          }
          $('.salavon-photo').mouseover(function(){
            var id = Number($(this).attr("id")[2]); 
            //not making it responsive... magic numbers
            widthArray = [151,159,131,250]
            var img_width = widthArray[id-1];
            if (id == 1) startX = 0;
            else{
            var startX = widthArray.slice(0,id-1).reduce(getSum) + 5*(id-1);
            }
            
            var barChart = d3.select(".salavon-grid")
                .append("svg")
                .attr("class","salavon-bar")
                .attr("width", 1000)
                .attr("height", 25);
                
            d3.json("data/salavon.json", function(error,data){
              if (error) throw error;
              let listLength = data[id-1].colorList.length;
              barChart.selectAll("rect")
                .data(data[id-1].colorList)
                .enter()
                .append("rect")
                .attr("height","0")
                .attr("width",function(d,i){return img_width/listLength})
                .attr("x",function(d,i){return startX+i*(img_width/listLength)})
                .attr("y","0")
                .attr("fill", function(d,i){return d})
                .transition("500")
                .attr("height","25");
            })
          });
          
          $('.salavon-photo').mouseout(function(){
            d3.select("#sec02").selectAll("rect")
                  .transition("500")
                  .attr("height","0")
                  .remove();
            

        });
        
        </script>
      </section>

<!--page_3 Faces-->
      <section id="sec03" class="mod-singular-section">
        <div class="mod-singular-section-in">
          <h2 class="mod-singular-hdng">An "average" face?</h2>
          <div class="container">
            <img src="images/cropped_yale.gif" width="700">
            <p class="mod-singular-txt-3 bottom-right">
              The <a href="http://academictorrents.com/details/aad8bf8e6ee5d8a3bf46c7ab5adfacdd8ad36247" target="_blank">Cropped Yale Dataset</a> is a widely-used dataset for machine learning and image processing research. The dataset contains 16128 images of 28 human subjects in 9 poses and 64 illumination conditions. It’s popularity is due in part to its high-quality alignment of facial features which allows the "mean" image of thousands of images to resemble a single face. <br> Interestingly, the more images that are used to compute the average face, the slower the rate of change in the mean image. That is, the average image tends to <em>converge fairly quickly</em> (between 20 and 50 images). See for yourself below! 
            </p>
          </div>
          <!--next_page_button-->
          <p class="mod-singular-pager"><a href="" class="mod-singular-next js-singular-next"></a></p>
          <!--next_page_button-->
        </div>
      </section>

<!--page_4 Convergence-->
      <section id="sec04" class="mod-singular-section">
        <div class="mod-singular-section-in">
          <h2 class="mod-singular-hdng">Can you find the point of convergence?</h2>
          <div class="grid-container">
            <!--slider image-->
            <div class="grid-item">
              <img id="faces" width="300">
            </div>
            <!--final image-->
            <div class="grid-item">
              <img src="images/mean_faces/mean_faces_2414.png" width="300">
            </div>
            <div class="gird-item">
            <p class="grid-item converge-txt">some text about converging point. Please add...</p>
            </div>
            <!--slider+caption-->
            <div class="grid-item">
              <input class="slider-width" id="valR" type="range" min="0" max="5" value="0" step="1" oninput="showVal(this.value)" onchange="showVal(this.value)" />
              <span id="range">0</span>
              <div class="grid-item face-number">
                <span id="realval">10</span>
                <span>faces</span>
              </div>
            </div>  
            <div class="grid-item face-number fn2">
              2414 faces
            </div>
            
          </div>
          <script>
            var val = $("#valR").val();
            $("#range").html=val;
            var numImages = 10;
            $("#faces").attr("src", "images/mean_faces/mean_faces_" + numImages + ".png");
            function showVal(newVal){
              if (newVal >= 2){ 
                $(".converge-txt").animate({opacity: '1'},"slow");
              }
              numImagesArr=["10", "50", "100", "500", "1000", "2414"]
              numImages=numImagesArr[newVal];
              $("#range").html(newVal);
              $("#realval").html(numImagesArr[newVal]);
              $("#faces").attr("src", "images/mean_faces/mean_faces_" + numImages + ".png");
            }

          </script>
          <!--next_page_button-->
          <p class="mod-singular-pager"><a href="" class="mod-singular-next js-singular-next"></a></p>
          <!--next_page_button-->
        </div>
      </section>
      
<!--page_5 History-->
      <section id="sec05" class="mod-singular-section">
        <div class="mod-singular-section-in">
          <h2 class="mod-singular-hdng">Can you tell? History through mean images</h2>
          <div class="time-container">
            <!--slider image-->
            <div class="time-div">
              <img id="time-magazine" height="400">
              <p id="time-cap">1923</p>
            <!--slider+caption-->
              <input class="slider-width time-slider" id="year" type="range" min="1923" max="2018" value="0" step="1" oninput="changeAll(this.value)" />
              <div id="slider-range-max"></div>
              <span class="speech-bubble"></span>
              <p class="time-intro">The mean image on the right is generated from the all the <i>Time</i> Magazines in a year, from its foundation till now. See if you can identify any historical events/figures from the mean images.<br><br>Please pick a few years that you can recognize something and shoot me a note. I'll add notes one I have it lol</p>
            </div>  
          </div>
          
          <!--change_cover+D3_bar_chart-->
          <script>      
            //change_cover
            var year = $("#year").val();
            var timeCover = "images/time/Time-" + year + ".jpg" ;
            $("#time-magazine").attr("src", timeCover);
                        
            //D3_bar_chart
            var barChart = d3.select(".time-container")
              .insert("svg",":first-child")
                .attr("class","stacked-bar")
                .attr("width", 100)
                .attr("height", 500)

            //load bar-chart
            d3.json("data/time.json",function(error, data){
              if (error) throw error;
              barChart.selectAll("rect")
                  .remove();
              
              barChart.selectAll("rect")
                .data(data[0].colorList)
                .enter()
                .append("rect")
                .attr("height","1.07")
                .attr("width","25")
                .attr("x","45")
                .attr("y",function(d,i){ return i*1.07})
                .attr("fill", function(d,i){return d});
            });
            
            function changeTimeCover(year){
                var timeCover = "images/time/Time-" + year + ".jpg" ;
                $("#time-magazine").attr("src", timeCover);
                $("#time-cap").html(year);
              }

            function changeBar(year){
              var index = year - 1923;
              
              d3.json("data/time.json",function(error, data){
              if (error) throw error;
              barChart.selectAll("rect")
                  .remove();

              barChart.selectAll("rect")
                  .data(data[index].colorList)
                  .enter()
                  .append("rect")
                  .attr("height","1.07")
                  .attr("y",function(d,i){ return i*1.07})
                  .attr("fill", function(d,i){return d})
                  .attr("x","70")
                  .attr("width","0")
                  .transition("500")
                  .attr("x","45")
                  .attr("width","25");
            });
            }

            function changeAll(year){
              changeTimeCover(year);
              changeBar(year);
            }
          </script>

          <!--next_page_button-->
          <p class="mod-singular-pager"><a href="" class="mod-singular-next js-singular-next"></a></p>
          <!--next_page_button-->
        </div>
      </section>

<!--page_6 Comparison-->
      <section id="sec06" class="mod-singular-section">
        <div class="mod-singular-section-in">
          <h2 class="mod-singular-hdng">Social norms and culture, through mean image </h2>

          <span id="filters" class="button-group">
              <button class="button" data-filter="*">Explore All</button>
              <button class="button" data-filter=".mvw">Men vs Women</button>
              <button class="button" data-filter=".countries">Magazines in different countries</button>
            </span>
          <div class="magazine-grid-container-5 comparison-container">            
            <!--draggable covers a-->
            <div class="magazine-grid-item-5">
              
              <div class="magazine-grid-container-a magazines">
                <div class="magazine-grid-item  mvw">
                  <div id="draggable-a" class="ui-widget-content menshealth"></div>
                </div>
                
                <div class="magazine-grid-item countries">
                  <div id="draggable-a" class="ui-widget-content usa"></div>
                </div>
                
                <div class="magazine-grid-item countries">
                  <div id="draggable-a" class="ui-widget-content japan"></div>
                </div>
                
                <div class="magazine-grid-item  countries">
                  <div id="draggable-a" class="ui-widget-content italia"></div>
                </div>
              </div>
            </div>
            
            <!--drop off area-->
            <div class="magazine-grid-item-5">
              <div id="droppable-a" class="ui-widget-header" style="display: inline-block">
                <p>Drag a magazine here</p>
              </div>
            </div>
            <div class="magazine-grid-item-5">
              <div id="droppable-b" class="ui-widget-header" style="display: inline-block;">
                <p>Drag a magazine here</p>
              </div>
            </div>
            
            <!--draggable covers b-->
            <div class="magazine-grid-item-5">
              <div class="magazine-grid-container-b magazines">
                
                <div class="magazine-grid-item mvw">
                  <div id="draggable-b" class="ui-widget-content womenshealth"></div>
                </div>
                
                <div class="magazine-grid-item mvw">
                  <div id="draggable-b" class="ui-widget-content placeholder"></div>
                </div>
                
                <div class="magazine-grid-item mvw">
                  <div id="draggable-b" class="ui-widget-content placeholder"></div>
                </div>  

                <div class="magazine-grid-item countries">
                  <div id="draggable-b" class="ui-widget-content placeholder"></div>
                </div>  
              </div>
            </div>
          </div> 
          <!--filter-->
          <script>
          // init Isotope
          var $gallery = $('.magazines').isotope({
            itemSelector: '.magazine-grid-item',
            llayoutMode: 'cellsByRow',
            cellsByRow: {
              columnWidth: 1100,
              rowHeight: 110
            }
          });

          // bind filter button click
          $('.button-group').on( 'click', 'button', function() {
            var filterValue = $( this ).attr('data-filter');
            $gallery.isotope({ filter: filterValue });
          });

          // change is-checked class on buttons
          $('.buttons').each( function( i, buttonGroup ) {
            var $buttonGroup = $( buttonGroup );
            $buttonGroup.on( 'click', 'button', function() {
              $buttonGroup.find('.is-checked').removeClass('is-checked');
              $( this ).addClass('is-checked');
            });
          });
          </script>
          <!--drag and drop-->
          <script>
            $( function() {
              $("#draggable-a, #draggable-b, #draggable-nonvalid-a, #draggable-nonvalid-b").draggable({ revert: "valid" });
              
              $( "#droppable-a" ).droppable({
                accept: "#draggable-a",
                classes: {
                  "ui-droppable-active": "ui-state-active-a",
                  "ui-droppable-hover": "ui-state-hover-a"
                },
                drop: function(event,ui) {
                  $(this).addClass("ui-state-highlight-a")
                           .find("p")
                           .html("");
                }
              });

              $( "#droppable-b" ).droppable({
                accept: "#draggable-b",
                classes: {
                  "ui-droppable-active": "ui-state-active-b",
                  "ui-droppable-hover": "ui-state-hover-b"
                },
                drop: function(event,ui){
                  $(this).addClass("ui-state-highlight-b")
                           .find("p")
                           .html("")}
              });
            } );
          </script>
          <!--next_page_button-->
          <p class="mod-singular-pager"><a href="" class="mod-singular-next js-singular-next"></a></p>
          <!--next_page_button-->
        </div>
      </section>

<!--page_7 Exploratory-->  
      <section id="sec07" class="mod-singular-section">
        <div class="mod-singular-section-in">
          <h2 class="mod-singular-hdng">Explore more mean images!</h2>
       <div class="exploratory">
          <a href="http://www.laurainthekitchen.com/recipe-category.php?category=BEVERAGE" 
          class="ex-container" target="_blank">
            <img src="images/exploratory/BEVERAGE.jpg" height="200" class="exploratory-photo food">
            <h2 class="img-name">Beverages</h2>
         </a>
          <a href="https://www.youtube.com/user/billwurtz" class="ex-container" target="_blank">
            <img src="images/exploratory/Bill%20Wurtz.jpg" height="200" class="exploratory-photo youtube">
            <h2 class="img-name">Bill Wurtz</h2>
         </a>
          <a href="https://www.youtube.com/user/TheFineBros" class="ex-container" target="_blank">
            <img src="images/exploratory/React.jpg" height="200" class="exploratory-photo youtube">
            <h2 class="img-name">React Videos</h2>
         </a>
          <a href="https://www.youtube.com/results?search_query=73+questions" 
          class="ex-container" target="_blank">
            <img src="images/exploratory/vogue-73-questions.jpg" height="200" class="exploratory-photo youtube">
            <h2 class="img-name">73 Questions</h2>
         </a>
          </div>
          
          <!--next_page_button-->
          <p class="mod-singular-pager"><a href="" class="mod-singular-prev js-singular-prev"></a></p>
          <!--next_page_button-->
        </div>
        <script>
        var $grid = $('.exploratory').isotope({
          // main isotope options
          itemSelector: '.ex-container',
          // set layoutMode
          layoutMode: 'masonry',
          masonry: {
            columnWidth: 45,
            gutter:10
          }
        })
        
        $(".ex-container").mouseover(function(){
          $(this).find(".img-name").animate({opacity: 1},'fast');
        }).mouseleave(function(){
          $(this).find(".img-name").animate({opacity: 0},'fast');
        });
        </script>
      </section>
    
    </div>
    <div class="mod-nav">
      <ul class="mod-nav-list js-singular-nav">
        <li class="mod-nav-item"><a href="#sec01">1</a></li>
        <li class="mod-nav-item"><a href="#sec02">2</a></li>
        <li class="mod-nav-item"><a href="#sec03">3</a></li>
        <li class="mod-nav-item"><a href="#sec04">4</a></li>
        <li class="mod-nav-item"><a href="#sec05">5</a></li>
        <li class="mod-nav-item"><a href="#sec06">6</a></li>
        <li class="mod-nav-item"><a href="#sec07">7</a></li>
      </ul>
    </div>

  </div>
</body>
</html>
